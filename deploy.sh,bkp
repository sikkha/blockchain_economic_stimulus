#!/usr/bin/env bash
set -euo pipefail

IMAGE_NAME="hackathon-app"

# Build the Docker image
docker build -t "$IMAGE_NAME" .

# Stop and remove any existing container
docker rm -f "$IMAGE_NAME" 2>/dev/null || true

# Run the container with port mapping and persistent data volume
docker run -d --name "$IMAGE_NAME" -p 4000:8000 -v "${PWD}/data:/data" "$IMAGE_NAME"

echo
echo "Project is running!"
echo "Access the application at http://localhost:4000"
echo "Health check endpoint: http://localhost:4000/healthz"
